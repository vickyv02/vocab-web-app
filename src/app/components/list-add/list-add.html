<div class="container">
    <div class="card">
        <div *ngIf="list$ | async as list; else loading">
            <h1>Add to {{ list.name }}</h1>
            <p *ngIf="list.description">{{ list.description }}</p>

            <form [formGroup]="addVocabForm" (ngSubmit)="addVocab()">
                <h2>New Vocab</h2>
                <div class="form-group">
                    <label for="vocab">Vocab</label>
                    <div class="input-group">
                        <input id="vocab" formControlName="vocab" placeholder="Vocab" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="pronunciation">Pronunciation</label>
                    <div class="input-group">
                        <input id="pronunciation" formControlName="pronunciation" placeholder="Pronunciation (optional)">
                        <button 
                        type="button" 
                        class="btn-square translate-btn"
                        [disabled]="!addVocabForm.get('vocab')?.value?.trim() || !pinyinPossible"
                        (click)="autoPinyin()"
                        title="Auto-create pinyin from characters"
                        aria-label="Auto pinyin">
                        ðŸ”„
                        </button>
                    </div>
                </div>
                <div class="form-group translation-group">
                    <label for="translation">Translation</label>
                    <div class="input-group">
                        <input id="translation" formControlName="translation" placeholder="Translation" required>
                        <button 
                        type="button" 
                        class="btn-square translate-btn"
                        [disabled]="!addVocabForm.get('vocab')?.value?.trim()"
                        (click)="autoTranslate()"
                        title="Auto-translate from source language"
                        aria-label="Auto translate">
                        ðŸ”„
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="example">Example</label>
                    <div class="input-group">
                        <input formControlName="example" placeholder="Example (optional)">
                    </div>
                </div>
                <div class="form-group">
                    <label for="category">Category</label>
                    <div class="input-group">
                        <select id="category" formControlName="category">
                            <option value="noun">Noun</option>
                            <option value="verb_adjective_adverb">Verb/Adjective/Adverb</option>
                            <option value="phrase_idiom">Phrase/Idiom</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn-primary submit-btn" [disabled]="addVocabForm.invalid">Add</button>
                <button type="button" class="btn-secondary" (click)="goBackToList()">Cancel</button>
            </form>
        </div>
    </div>
</div>

<ng-template #loading>
  <p>Loading list...</p>
</ng-template>