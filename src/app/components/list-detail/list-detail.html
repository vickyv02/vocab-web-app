<div class="container">
  <div *ngIf="list$ | async as list; else loading">
      <h1>{{ list.name }}</h1>
      <p *ngIf="list.description">{{ list.description }}</p>

      <div style="margin: 1.5rem 0; display: flex; gap: 1rem; flex-wrap: wrap;">
        <button class="btn-primary" (click)="addNewItem()">Add New Item</button>
        <!-- Add from JSON -->
        <input class="btn-primary" type="file" (change)="onVocabFileSelected($event)" accept=".json,.txt"> 
      </div>

      <h2>Study</h2>
      <div style="margin: 1.5rem 0; display: flex; gap: 1rem; flex-wrap: wrap;">
        <button (click)="startQuiz()">Multiple Choice Quiz</button>
        <button (click)="goBackToLists()">Back to Lists</button>
      </div>

      <h2>Words ({{ list.itemCount }})</h2>
      <ul class="list-container">
          <li ngClass="card" *ngFor="let item of list.items">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
              <div class="card-content">
                <strong>{{ item.vocab }}</strong> - {{ item.translation }} [{{ item.pronunciation }}]
                <br />
                <blockquote *ngIf="item.example">{{ item.example }}</blockquote>
              </div>
              <button class="menu-btn" (click)="toggleMenu(item.id)">â‹®</button>
            </div>

            <div class="menu-dropdown" *ngIf="showMenuId === item.id">
              <button (click)="editItem(item.id)">Edit</button>
              <button class="delete" (click)="deleteItem(item.id)">Delete</button>
            </div>
          </li>

          <li *ngIf="list.itemCount === 0">No words yet. Add one below!</li>
      </ul>
  </div>
</div>

<ng-template #loading>
  <p>Loading list...</p>
</ng-template>

<div *ngIf="!(list$ | async) && listId">
  <p>List not found.</p>
</div>